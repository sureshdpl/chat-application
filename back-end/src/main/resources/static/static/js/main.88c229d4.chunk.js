(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{109:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),c=a(25),r=a.n(c),i=(a(55),a(13)),o=a(14),l=a(16),d=a(15),u=(a(56),a(11)),h=a(7),j=a(9),f=a(1),g=a(5),p=a(49),m=a.n(p),b=a(0),O=function(e){var t=Object(s.useState)({userId:"",firstName:"",lastName:""}),a=Object(g.a)(t,2),n=a[0],c=a[1],r=function(t){t&&t.profileObj?(c({userId:t.profileObj.email,firstName:t.profileObj.firstName,lastName:t.profileObj.lastName}),e.submitRequest(n)):alert("Google Login Failed")};return Object(b.jsx)("div",{children:Object(b.jsx)(m.a,{clientId:"809584238866-q4n3hl8kr9leiv8pj08n7b3q8um0d4h2.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:r,onFailure:r,cookiePolicy:"single_host_origin"})})};a(64);var v=function(e){var t=Object(s.useState)({password:"",userId:""}),a=Object(g.a)(t,2),n=a[0],c=a[1],r=function(e){c(Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},e.target.name,e.target.value)))};return Object(b.jsx)("div",{className:"login-container",children:Object(b.jsxs)("div",{className:"login-form",children:[Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{className:"form-label",children:"User Id"}),Object(b.jsx)("input",{type:"email",className:"form-control",name:"userId",onChange:r})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{className:"form-label",children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",name:"password",onChange:r})]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(){console.log(n),e.signIn(n)},children:"Sign In"})]})})},N=function(e){var t=Object(s.useState)({userId:"",password:"",firstName:"",lastName:""}),a=Object(g.a)(t,2),n=a[0],c=a[1],r=function(e){c(Object(f.a)(Object(f.a)({},n),{},Object(j.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)("div",{className:"signup-container",children:[Object(b.jsxs)("div",{className:"signup-form",children:[Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{className:"form-label",children:"User Id"}),Object(b.jsx)("input",{type:"email",className:"form-control",name:"userId",onChange:r})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{className:"form-label",children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",name:"password",onChange:r})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{className:"form-label",children:"First Name"}),Object(b.jsx)("input",{type:"email",className:"form-control",name:"firstName",onChange:r})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{className:"form-label",children:"Last Name"}),Object(b.jsx)("input",{type:"email",className:"form-control",name:"lastName",onChange:r})]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(){e.signUp(n)},children:"Sign Up"})]}),Object(b.jsx)(O,{submitRequest:n})]})},x="lOGIN_LOADING",S="lOGIN_SUCCESS",I="LOGIN_FAILED",C="SIGNUP_LOADING",y="SIGNUP_SUCCESS",U="SIGNUP_FAILED",T="FETCH_USERS_LOADING",E="FETCH_USERS_SUCCESS",_="FETCH_USERS_FAILED",M="FETCH_CHAT_MSGS_LOADING",G="FETCH_CHAT_MSGS_SUCCESS",R="FETCH_CHAT_MSGS_FAILED",D="FETCH_CHAT_MSGS_LOADING",w="FETCH_CHAT_MSGS_SUCCESS",A="FETCH_CHAT_MSGS_FAILED",L="MSG_SEND_SUCCESS",F="MSG_SEND_FAILED",P="GROUP_MSG_SEND_SUCCESS",H="GROUP_MSG_SEND_FAILED",k="FETCH_GROUP_CHATS_SUCCESS",Y="FETCH_GROUP_CHATS_FAILED",J="CREATE_GROUP_SUCCESS",B="CREATE_GROUP_FAILED",q="RECIVE_GROUP_CHAT_MSG_SUCCESS",V="RECIVE_CHAT_MESSAGE_TYPING",W="CHAT_MESSAGE_TYPING_STOP";function z(e){return{type:A,faildMessage:e}}function K(e){return{type:L,response:e}}function Q(e){return{type:F,faildMessage:e}}function X(e){return{type:H,faildMessage:e}}function Z(e){return{type:Y,faildMessage:e}}function $(e){return{type:B,faildMessage:e}}function ee(e){return{type:V,response:e}}function te(e,t){return{type:I,response:e,faildMessage:t}}function ae(e){return{type:U,faildMessage:e}}function se(e){return{type:_,faildMessage:e}}var ne={SIGN_UP:"./api/user/signUp",SIGN_IN:"./api/user/signIn",FETCH_USERS:"./api/user/",SNED_MSG:"./api/chat",FETCH_CHAT_MSGS:"./api/chat/",FETCH_CHATS:"./api/chat/",FETCH_GROUP_CHAT_MSGS:"./api/chat/fetchChatRooms/",SNED_GROUP_MSG:"./api/chat/sendChatRoomMessage",CREATE_GROUP:"./api/chat/createChatRoom",SEND_TYPING_MESSAGE:"./api/chat/sendTypingMessage"};function ce(e){return function(t){return t({type:C}),fetch(ne.SIGN_UP,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&0===e.statusCode?t(function(e){return{type:y,response:e}}(e.result[0])):t(ae(e.description))})).catch((function(e){console.log(e),t(ae("Signup failed."))}))}}function re(e){return function(t){return t({type:x}),fetch(ne.SIGN_IN,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&0===e.statusCode?t(function(e){return{type:S,response:e}}(e.result[0])):t(te(e.description))})).catch((function(e){console.log(e),t(te("Login failed"))}))}}function ie(){return function(e){return e({type:T}),fetch(ne.FETCH_USERS,{headers:{"Content-Type":"application/json"},method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log(t),t&&0===t.statusCode?e(function(e){return{type:E,response:e}}(t.result)):e(se(t.description))})).catch((function(t){console.log(t),e(se("Fetch Users failed"))}))}}function oe(e){return function(t){return t({type:D}),fetch(ne.FETCH_CHATS+e,{headers:{"Content-Type":"application/json"},method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&0===e.statusCode?t(function(e){return{type:w,response:e}}(e.result)):t(z(e.description))})).catch((function(e){console.log(e),t(z("Fetch Chats failed"))}))}}function le(e){return function(t){return fetch(ne.FETCH_GROUP_CHAT_MSGS+e,{headers:{"Content-Type":"application/json"},method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&0===e.statusCode?t(function(e){return{type:k,response:e}}(e.result)):t(Z(e.description))})).catch((function(e){console.log(e),t(Z("Fetch Group Messages failed"))}))}}function de(e){return function(t){return fetch(ne.SNED_GROUP_MSG,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&0===e.statusCode?t(function(e){return{type:P,response:e}}(e.result[0])):t(X(e.description))})).catch((function(e){console.log(e),t(X("Group message failed"))}))}}function ue(e){return function(t){return fetch(ne.CREATE_GROUP,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),e&&0===e.statusCode?t(function(e){return{type:J,response:e}}(e.result[0])):t($(e.description))})).catch((function(e){console.log(e),t($("Group creation failed."))}))}}a(65);var he="GROUP",je="USER",fe="CHAT_USER_TYPING",ge="GROUP_CHAT_USER_TYPING";a(66),a(67);function pe(e){var t=new Date(e),a=new Date,s=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),c=t.getFullYear().toString().padStart(4,"0"),r="".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"),":").concat(t.getSeconds().toString().padStart(2,"0"));return t.getDay()===a.getDay()?r:t.getDate()===a.getDate()-1?"Yesterday "+r:t.getFullYear()===a.getFullYear()?n+"-"+s+" "+r:n+"-"+s+c+" "+r}function me(e){var t=new Date(e),a=new Date,s=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),c=t.getFullYear().toString().padStart(4,"0"),r="".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"));return t.getDay()===a.getDay()?r:t.getDate()===a.getDate()-1?"Yesterday":t.getFullYear()===a.getFullYear()?n+"-"+s:n+"-"+s+c}a(68);var be=function(e){var t=e.name,a=e.typing,n=e.showName,c=e.userNameClass,r=e.waveClass,i=Object(h.c)();return Object(s.useEffect)((function(){setTimeout((function(){return i({type:W,response:a})}),1e4)})),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:c,children:n?t+" is typing":" typing"}),Object(b.jsxs)("div",{id:r,children:[Object(b.jsx)("span",{class:"dot"}),Object(b.jsx)("span",{class:"dot"}),Object(b.jsx)("span",{class:"dot"})]})]})},Oe=function(e){var t=e.oldChat,a=e.recipientUser,n=e.loginInfo,c=e.chats,r=e.chatType,i=e.users;console.log(n);var o=Object(s.useState)({messageText:""}),l=Object(g.a)(o,2),d=l[0],u=l[1],h=Object(s.useRef)(null);Object(s.useEffect)((function(){!function(){var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}()}));var p=function(e){var t=i.data.findIndex((function(t){return t.id===e}));return t>-1?i.data[t]:null},m=function(e,t){return e&&e.senderUserId&&e.senderUserId===n.data.id?function(e,t){return Object(b.jsx)("div",{className:"msg right-msg",children:Object(b.jsxs)("div",{className:"msg-bubble",children:[Object(b.jsx)("div",{className:"msg-info",children:Object(b.jsx)("div",{className:"msg-info-time",children:pe(e.messageTimestamp)})}),Object(b.jsx)("div",{className:"msg-text",children:e.message})]})},t)}(e,t):function(e,t){var a=p(e.senderUserId);return Object(b.jsxs)("div",{className:"msg left-msg",children:[Object(b.jsx)("div",{className:"msg-img",style:{backgroundImage:"url(".concat(a.avatarUrl,")")}}),Object(b.jsxs)("div",{className:"msg-bubble",children:[Object(b.jsxs)("div",{className:"msg-info",children:[Object(b.jsx)("div",{className:"msg-info-name",children:a.firstName}),Object(b.jsx)("div",{className:"msg-info-time",children:pe(e.messageTimestamp)})]}),Object(b.jsx)("div",{className:"msg-text",children:e.message})]})]},t)}(e,t)};return Object(b.jsx)("div",{classNameName:"chat-message-container",children:Object(b.jsx)("section",{className:"msger",children:r?Object(b.jsxs)("div",{children:[Object(b.jsxs)("header",{className:"msger-header",children:[function(e){if(e&&e.chatId){var t=p(e.senderUserId===n.data.id?e.reciverUserId:e.senderUserId);return t?Object(b.jsxs)("div",{className:"msger-header-title",children:[t.avatarUrl?Object(b.jsx)("img",{src:t.avatarUrl,alt:"Avatar",className:"chat-user-profile-avatar",style:{float:"left"}}):Object(b.jsx)("span",{className:"chat-user-icon chat-title-user-icon"}),Object(b.jsx)("div",{className:"chat-title-user-name",children:t.firstName+" "+t.lastName}),Object(b.jsx)("i",{className:"fas fa-comment-alt"})]}):null}if(e&&e.chatRoomId)return Object(b.jsxs)("div",{className:"msger-header-title",children:[e.avatarUrl?Object(b.jsx)("img",{src:e.avatarUrl,alt:"Avatar",className:"chat-user-profile-avatar"}):Object(b.jsx)("span",{className:"chat-user-group-icon chat-title-group-icon"}),Object(b.jsxs)("div",{className:"chat-title-group-name",children:[" ",e.chatRoomName]}),Object(b.jsx)("i",{className:"fas fa-comment-alt",children:" "})]})}(c),Object(b.jsx)("div",{className:"msger-header-options",children:Object(b.jsx)("span",{children:Object(b.jsx)("i",{className:"fas fa-cog"})})})]}),Object(b.jsxs)("main",{className:"msger-chat",id:"msger-chat-id",children:[r===je?Object(b.jsxs)("div",{children:[" ",c&&c.chatMessages&&c.chatMessages.length?c.chatMessages.map((function(e,t){return m(e,t)})):"No Messages to load"]}):c&&c.chatMessages&&c.chatMessages.length?c.chatMessages.map((function(e,t){return m(e,t)})):"Welcome to group",Object(b.jsx)("div",{ref:h})]}),function(e){if(e&&e.typing&&e.typing.isTyping){if(e.typing.chatType===je){var t=p(e.senderUserId===n.data.id?e.reciverUserId:e.senderUserId);return t?Object(b.jsx)("div",{children:Object(b.jsx)(be,{name:t.firstName,typing:e.typing,showName:!0,userNameClass:"chat-middle-typing-user-name",waveClass:"wave-middle"})}):Object(b.jsx)("div",{style:{height:"23px"}})}var a=p(e.typing.senderId);return a?Object(b.jsx)("div",{children:Object(b.jsx)(be,{name:a.firstName,typing:e.typing,showName:!0,userNameClass:"chat-middle-typing-user-name",waveClass:"wave-middle"})}):Object(b.jsx)("div",{style:{height:"23px"}})}return Object(b.jsx)("div",{style:{height:"23px"}})}(c),Object(b.jsxs)("form",{className:"msger-inputarea",children:[Object(b.jsx)("input",{type:"text",className:"msger-input",placeholder:"Enter your message...",name:"messageText",onChange:function(t){u(Object(f.a)(Object(f.a)({},d),{},Object(j.a)({},t.target.name,t.target.value)));var s=null!==c.chatId&&c.chatId?c.chatId:null!=c.chatRoomId&&c.chatRoomId?c.chatRoomId:null;if(t.target.value.length>=3&&s){var i={id:s,receiverId:a.id,senderId:n.data.id,chatType:r};e.sendTypingNotification(i)}}}),Object(b.jsx)("button",{type:"submit",className:"msger-send-btn",onClick:function(s){s.preventDefault(),console.log(c);var i={};i=r===je?{senderId:n.data.id,recipientId:a.id,content:d.messageText,chatId:t.chatId}:{chatRoomId:c.chatRoomId,message:d.messageText,senderId:n.data.id},e.sendMessage(i,r),console.log("Message sent successfully",JSON.stringify(i)),u((function(e){return Object(f.a)(Object(f.a)({},e),{},{messageText:""})}))},children:"Send"})]})]}):Object(b.jsx)("div",{className:"chat-welcome-image",children:Object(b.jsx)("div",{className:"chat-welocme-msg",children:"Welcome to chat room"})})})})},ve=(a(69),a(70),function(e){var t=e.index,a=e.user;return Object(b.jsxs)("div",{className:e.checked?e.chatUserProfile+" chat-user-profile":e.chatUserProfile,onClick:function(t){e.handleUser()},children:[a.avatarUrl?Object(b.jsx)("img",{src:a.avatarUrl,alt:"Avatar",className:"chat-user-profile-avatar"}):Object(b.jsx)("span",{className:e.chatUserIcon}),Object(b.jsxs)("div",{className:a.avatarUrl?"chat-user-chat-profile-user-name2":"chat-user-chat-profile-user-name",children:[" ",a.firstName+" "+a.lastName]})]},t)}),Ne=function(e){var t=e.loginInfo,a=e.users,s=function(t){console.log(t),e.startChat(t)};return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"",children:[Object(b.jsx)("div",{className:"chat-right-header",children:"Users"}),Object(b.jsx)("div",{className:"users-div",children:a&&a.data&&a.data.length?a.data.map((function(e,a){return e.id===t.data.id?null:Object(b.jsx)(ve,{user:e,index:a,handleUser:s,chatUserProfile:"chat-user-chat-profile",chatUserIcon:"chat-user-icon"})})):"No Users Found"})]})})},xe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={selected:!1},s.handleChange=s.handleChange.bind(Object(u.a)(s)),s}return Object(o.a)(a,[{key:"handleChange",value:function(){var e=this;this.setState((function(e){return{selected:!e.selected}}),(function(){return e.props.onOptionChange(e.props.id,e.state.selected)}))}},{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsx)("div",{id:this.props.id,children:Object(b.jsx)(ve,{user:this.props.user,index:this.props.id,handleUser:this.handleChange,chatUserProfile:"chat-user-profile-group-create",chatUserIcon:"chat-user-icon-group-create",checked:this.state.selected})})})}}]),a}(n.a.Component),Se=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={selectedOptions:[]},s.onOptionsChange=s.onOptionsChange.bind(Object(u.a)(s)),s}return Object(o.a)(a,[{key:"onOptionsChange",value:function(e,t){var a=this;t?this.setState((function(t){return t.selectedOptions.push(e),{selectedOptions:t.selectedOptions}}),(function(){return a.props.onOptionsChange(a.state.selectedOptions)})):this.setState((function(t){var a=t.selectedOptions.indexOf(e);return a>-1&&t.selectedOptions.splice(a,1),{selectedOptions:t.selectedOptions}}),(function(){return a.props.onOptionsChange(a.state.selectedOptions)}))}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("legend",{children:this.props.title}),this.props.options.map((function(t,a){return Object(b.jsx)(xe,{user:t,id:t.id,option:t.firstName,onOptionChange:e.onOptionsChange},t.id)}))]})}}]),a}(n.a.Component),Ie=function(e){var t=e.users,a=e.loginInfo,n=Object(s.useState)({groupName:"",groupMembers:[]}),c=Object(g.a)(n,2),r=c[0],i=c[1];return Object(b.jsxs)("div",{className:"create-chat-room-container",children:[Object(b.jsxs)("div",{className:"chat-group-create-btns",children:[Object(b.jsx)("button",{className:"chat-btn btn-create",onClick:function(){var t={chatRoomName:r.groupName,chatRoomUserIds:r.groupMembers,createdBy:a.data.id};e.submitCreateGroup(t)},children:"Create Group"}),Object(b.jsx)("button",{className:"chat-btn btn-cancle",onClick:e.backFromCreateGroup,children:"Cancle"})]}),Object(b.jsx)("div",{className:"chat-boarder"}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{type:"text",name:"groupName",placeholder:"Enter Group Name",onChange:function(e){i(Object(f.a)(Object(f.a)({},r),{},Object(j.a)({},e.target.name,e.target.value)))}})}),Object(b.jsx)("div",{children:"Select the users"}),Object(b.jsx)("div",{children:Object(b.jsx)(Se,{options:t.data,onOptionsChange:function(e){console.log(e),i(Object(f.a)(Object(f.a)({},r),{},{groupMembers:e})),console.log(r)}})})]})},Ce=(a(32),function(e){var t=e.chats,a=(e.oldChat,e.recipientUser,e.loginInfo),n=e.users,c=Object(s.useState)([]),r=Object(g.a)(c,2),i=(r[0],r[1],Object(s.useState)("")),o=Object(g.a)(i,2),l=(o[0],o[1],function(t,a){e.openUserChat(t,a)}),d=function(e){return e.reciverUser&&a.data&&e.reciverUser.id===a.data.id?e.senderUser:e.reciverUser},u=(Object(h.d)((function(e){return e.chats})),function(e){if(n.data){var t=n.data.findIndex((function(t){return t.id===e}));return t>-1?n.data[t]:null}return null}),j=function(e){var t;return e&&e.typing&&e.typing.isTyping&&(t=e.typing.chatType===je?u(e.senderUserId===a.data.id?e.reciverUserId:e.senderUserId):u(e.typing.senderId))?Object(b.jsx)("div",{children:Object(b.jsx)(be,{name:t.firstName,typing:e.typing,showName:!1,userNameClass:"chat-left-typing-user-name",waveClass:"wave-left-side"})}):Object(b.jsx)("div",{style:{height:"23px"}})};return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"chat-user-group-search",children:Object(b.jsx)("input",{className:"chat-user-group-search-input",placeholder:"Search Chat",type:"text"})}),Object(b.jsx)("div",{className:"chat-user-chats",id:"jkj12",children:t&&t.data?t.data.map((function(e,t){return e.chatId?function(e,t){return Object(b.jsxs)("div",{id:t,className:"chat-user-chat-profile",onClick:function(t){l(e,je)},children:[d(e).avatarUrl?Object(b.jsx)("img",{src:d(e).avatarUrl,alt:"Avatar",className:"chat-user-profile-avatar"}):Object(b.jsx)("span",{className:"chat-user-icon",style:{marginLeft:"-5px"}}),Object(b.jsxs)("div",{className:d(e).avatarUrl?"chat-user-chat-profile-user-name2":"chat-user-chat-profile-user-name",children:[d(e).firstName," "]},e.chatId),Object(b.jsx)("div",{className:"chat-left-last-timestamp",children:me(e.lastTimestamp)}),e.typing&&e.typing.isTyping?j(e):Object(b.jsx)("div",{className:"chat-left-last-sent",children:u(e.lastMessageSentBy).firstName+": "+e.lastMessage}),Object(b.jsx)("div",{className:"chat-left-msg-count",children:"5"})]},t)}(e,t):function(e,t){return Object(b.jsxs)("div",{id:t,className:"chat-user-chat-profile",onClick:function(t){l(e,he)},children:[e.avatarUrl&&null!==e.avatarUrl?Object(b.jsx)("img",{src:e.avatarUrl,alt:"Avatar",className:"chat-user-profile-avatar"}):Object(b.jsx)("span",{className:"chat-user-group-icon"}),Object(b.jsxs)("div",{className:"chat-user-chat-profile-user-name",children:[" ",e.chatRoomName," "]},e.chatRoomId),Object(b.jsx)("div",{className:"chat-left-last-timestamp",children:me(e.lastTimestamp)}),e.typing&&e.typing.isTyping?j(e):Object(b.jsx)("div",{className:"chat-left-last-sent",children:e.lastMessageSentBy?u(e.lastMessageSentBy).firstName+": "+e.lastMessage:""}),Object(b.jsx)("div",{className:e.lastMessageSentBy?"chat-left-msg-count":"chat-left-msg-count-2",children:"10"})]},t)}(e,t)})):null})]})}),ye=(a(71),function(e){var t=e.dropDownList;return Object(b.jsx)("div",{className:"chat-dropdown-menu",children:t.map((function(t,a){return Object(b.jsxs)("div",{className:"chat-dropdown-option",onClick:function(a){return function(t){e.selectedItem(t)}(t)},children:[" ",t," "]},a)}))})}),Ue=["Create Group","Settings"],Te=function(e){var t=e.oldChat,a=e.recipientUser,n=e.loginInfo,c=e.chats,r=e.users,i=Object(s.useState)(!1),o=Object(g.a)(i,2),l=o[0],d=o[1],u=Object(s.useState)(!1),j=Object(g.a)(u,2),f=j[0],p=j[1];Object(h.c)();Object(s.useEffect)((function(){console.log("oldChat",t),console.log("recipientUser",a)}));return Object(b.jsxs)("div",{className:"chat-left-container",children:[Object(b.jsxs)("div",{className:"chat-left-top",children:[Object(b.jsxs)("div",{className:"chat-left-user-profile",children:[n.data.avatarUrl?Object(b.jsx)("img",{src:n.data.avatarUrl,alt:"Avatar",className:"chat-user-profile-avatar"}):Object(b.jsx)("span",{className:"chat-user-icon"}),Object(b.jsx)("span",{className:n.data.avatarUrl?"chat-left-user-profile-user-name":"chat-left-user-profile-user-name2",children:n.data.firstName})]}),Object(b.jsxs)("div",{className:"chat-left-options",children:[Object(b.jsx)("i",{className:"chat-left-options-icon",onClick:function(){d(!0)},children:"..."}),l?Object(b.jsx)(ye,{selectedItem:function(e){console.log(e),d(!1),"Create Group"===e&&p(!0)},dropDownList:Ue}):""]})]}),f?Object(b.jsx)(Ie,{users:r,submitCreateGroup:function(t){console.log(t),p(!1),e.submitCreateGroup(t)},loginInfo:n,backFromCreateGroup:function(){p(!0)}}):Object(b.jsx)("div",{children:Object(b.jsx)(Ce,{loginInfo:n,chats:c,_chats:c,oldChat:t,recipientUser:a,openUserChat:function(t,a){e.openUserChat(t,a)},users:r})})]})},Ee=null,_e=function(e){var t=e.loginInfo,n=Object(s.useState)({}),c=Object(g.a)(n,2),r=c[0],i=c[1],o=Object(s.useState)({}),l=Object(g.a)(o,2),d=l[0],u=l[1],j=Object(s.useState)(""),p=Object(g.a)(j,2),m=p[0],O=p[1],v=Object(h.c)();Object(s.useEffect)((function(){v(ie())}),[v]),Object(s.useEffect)((function(){v(oe(t.data.id)),v(le(t.data.id))}),[v,t.data.id]),Object(s.useEffect)((function(){null==Ee&&S()}));var N=Object(h.d)((function(e){return e.users}));console.log("users",N);var x=Object(h.d)((function(e){return e.chats})),S=function(){var e=a(72),t=a(79);t=new t("http://localhost:2727/ws"),(Ee=e.over(t)).connect({},I,C)},I=function(){console.log("connected"),Ee.subscribe("/user/"+t.data.id+"/queue/messages",y)},C=function(e){console.log(e)},y=function(e){var t,a=JSON.parse(e.body);console.log("Message recevied",a),je===a.messageType?v(K(a.message[0])):he===a.messageType?v((t=a.message[0],{type:q,response:t})):(fe===a.messageType||ge===a.messageType)&&v(ee(a.message))};return Object(b.jsx)("div",{className:"chat-container",children:Object(b.jsxs)("div",{className:"chat-row",children:[Object(b.jsx)("div",{className:"chat-left",children:Object(b.jsx)(Te,{oldChat:d,recipientUser:r,loginInfo:t,chats:x,openUserChat:function(e,a){console.log(e);var s=null;if(je===a){if(t.data.id===e.reciverUser.id?i(Object(f.a)({},e.senderUser)):i(Object(f.a)({},e.reciverUser)),x&&x.data){var n=x.data.findIndex((function(a){return a.senderUser&&(a.senderUser.id===t.data.id||a.senderUser.id===e.senderUser.id)&&a.reciverUser&&(a.reciverUser.id===e.reciverUser.id||a.reciverUser.id===t.data.id)}));n>-1&&(s=x.data[n])}}else if(x&&x.data){var c=x.data.findIndex((function(t){return t.chatRoomId===e.chatRoomId}));c>-1&&(s=x.data[c])}u(Object(f.a)({},s)),O(a)},users:N,submitCreateGroup:function(e){v(ue(e))}})}),Object(b.jsx)("div",{className:"chat-middle",children:Object(b.jsx)(Oe,{oldChat:d,recipientUser:r,loginInfo:t,sendMessage:function(e,t){var a;v(t===je?(a=e,function(e){return fetch(ne.SNED_MSG,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(t){console.log(t),t&&0===t.statusCode?e(K(t.result[0])):e(Q(t.description))})).catch((function(t){console.log(t),e(Q("Login failed"))}))}):de(e)),console.log("Message sent successfully",JSON.stringify(e))},chats:function(){if(x&&x.data&&x.data.length){var e=-1;return(e=m===je?x.data.findIndex((function(e){return e.chatId&&e.chatId===d.chatId||e.reciverUserId===r.id})):x.data.findIndex((function(e){return e.chatRoomId===d.chatRoomId})))>-1?x.data[e]:1===x.data.length&&(d.chatId||d.chatRoomId)?x.data[0]:null}return null}(),chatType:m,users:N,sendTypingNotification:function(e){v(function(e){return function(t){return fetch(ne.SEND_TYPING_MESSAGE,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}(e))}})}),Object(b.jsx)("div",{className:"chat-right",children:Object(b.jsx)(Ne,{startChat:function(e){console.log(e),i(Object(f.a)({},e));var a=null;if(x&&x.data){var s=x.data.findIndex((function(a){return(a.senderUserId===t.data.id||a.senderUserId===e.id)&&(a.reciverUserId===e.id||a.reciverUserId===t.data.id)}));a=s>-1?x.data[s]:null,console.log(a)}u(Object(f.a)({},a)),O(je)},loginInfo:t,users:N,chatType:m})})]})})},Me=(a(109),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleScroll=function(e){},s.state={isSignIn:!0},s.signIn=s.signIn.bind(Object(u.a)(s)),s.signUp=s.signUp.bind(Object(u.a)(s)),s}return Object(o.a)(a,[{key:"signIn",value:function(e){console.log(e),this.props.signIn(e).then((function(){}))}},{key:"signUp",value:function(e){var t=this;console.log(e),this.props.signUp(e).then((function(){t.setState({isSignIn:!0})}))}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"main-container",children:[this.props.loginInfo&&this.props.loginInfo.data?null:Object(b.jsxs)("div",{className:"signin-signup-div",children:[Object(b.jsx)("button",{onClick:function(t){e.setState({isSignIn:!0})},children:"SignIn"}),Object(b.jsx)("button",{onClick:function(t){e.setState({isSignIn:!1})},children:"SignUp"})]}),this.props.loginInfo&&this.props.loginInfo.data?Object(b.jsx)(_e,{loginInfo:this.props.loginInfo}):this.state.isSignIn?Object(b.jsx)(v,{signIn:this.signIn}):Object(b.jsx)(N,{signUp:this.signUp})]})}}]),a}(n.a.Component));var Ge=Object(h.b)((function(e){return{loginInfo:e.loginInfo}}),(function(e){return{dispatch:e,signIn:function(t){return e(re(t))},signUp:function(t){return e(ce(t))}}}),null,{pure:!1})(Me),Re=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsx)(Ge,{})})}}]),a}(n.a.Component),De=(a(110),a(22));function we(e,t){if(e&&e.length){var a=e.findIndex((function(e){return e.chatId===t.chatId}));return a>-1?e[a].chatMessages.push(t.chatMessages[0]):e.push(t),e}return[t]}function Ae(e,t){if(e&&e.length){var a=e.findIndex((function(e){return e.chatRoomId===t.chatRoomId}));return a>-1?e[a].chatMessages.push(t.chatMessages[0]):e.push(t),e}return[t]}function Le(e,t){return e&&e.length?e.concat(t):[t]}function Fe(e,t){if(t.chatType===je){var a=e.findIndex((function(e){return e.chatId===t.id}));return a>-1&&(e[a]=Object(f.a)(Object(f.a)({},e[a]),{},{typing:Object(f.a)(Object(f.a)({},t),{},{isTyping:!0})})),e}var s=e.findIndex((function(e){return e.chatRoomId===parseInt(t.id)}));return s>-1&&(e[s]=Object(f.a)(Object(f.a)({},e[s]),{},{typing:Object(f.a)(Object(f.a)({},t),{},{isTyping:!0})})),e}function Pe(e,t){if(t.chatType===je){var a=e.findIndex((function(e){return e.chatId===t.id}));return a>-1&&(e[a]=Object(f.a)(Object(f.a)({},e[a]),{},{typing:Object(f.a)(Object(f.a)({},t),{},{isTyping:!1})})),e}var s=e.findIndex((function(e){return e.chatRoomId===parseInt(t.id)}));return s>-1&&(e[s]=Object(f.a)(Object(f.a)({},e[s]),{},{typing:Object(f.a)(Object(f.a)({},t),{},{isTyping:!1})})),e}function He(e){if(e&&e.length){for(var t=0;t<e.length;t++)e[t].chatMessages=e[t].chatMessages.sort((function(e,t){return new Date(t.messageTimestamp)-new Date(e.messageTimestamp)})),e[t]=Object(f.a)(Object(f.a)({},e[t]),{},{lastTimestamp:e[t].chatMessages.length?e[t].chatMessages[0].messageTimestamp:e[t].createdTimestamp,lastMessage:e[t].chatMessages.length?e[t].chatMessages[0].message:"",lastMessageSentBy:e[t].chatMessages.length?e[t].chatMessages[0].senderUserId:""}),e[t].chatMessages=e[t].chatMessages.sort((function(e,t){return new Date(e.messageTimestamp)-new Date(t.messageTimestamp)}));e=e.sort((function(e,t){return new Date(t.lastTimestamp)-new Date(e.lastTimestamp)}))}return e}var ke=Object(De.b)({loginInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(f.a)(Object(f.a)({},e),{},{isLogin:!1,data:null,loginType:null});case S:return Object(f.a)(Object(f.a)({},e),{},{isLogin:!0,data:t.response});case I:return Object(f.a)(Object(f.a)({},e),{},{isLogin:!1,data:t.response,message:t.failedMessage});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!0,isError:!1,data:null});case E:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!1,data:t.response});case _:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!0,data:null,message:t.failedMessage});default:return e}},chatMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!0,isError:!1,data:null});case G:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!1,data:t.response});case R:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!0,data:null,message:t.failedMessage});default:return e}},chats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!0,isError:!1,data:[]});case w:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!1,data:He(t.response)});case A:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!0,data:[],message:t.failedMessage});case L:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!1,data:He(we(e.data,t.response))});case F:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!0,message:t.failedMessage});case P:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!1,data:He(Ae(e.data,t.response))});case H:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!0,message:t.failedMessage});case k:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!1,data:He(Le(e.data,t.response))});case Y:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!0,message:t.failedMessage});case J:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!1,data:He(Le(e.data,t.response))});case B:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!0,message:t.failedMessage});case q:return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isError:!1,data:He(Ae(e.data,t.response))});case V:return Object(f.a)(Object(f.a)({},e),{},{data:Fe(e.data,t.response)});case W:return Object(f.a)(Object(f.a)({},e),{},{data:Pe(e.data,t.response)});default:return e}}}),Ye=a(50),Je=(a(111),[Ye.a]);var Be=Object(De.c)(ke,{},De.a.apply(void 0,Je));r.a.render(Object(b.jsx)(h.a,{store:Be,children:Object(b.jsx)(Re,{})}),document.getElementById("root"))},32:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.88c229d4.chunk.js.map